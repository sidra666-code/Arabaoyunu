<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sonsuz Hill Climb</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; font-family: sans-serif; }

    #orientationWarning {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      color: white;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #game {
      width: 100vw;
      height: 100vh;
      background: linear-gradient(to top, #87ceeb, #e0f7ff);
      overflow: hidden;
      position: relative;
    }

    .cloud {
      position: absolute;
      top: 0;
      font-size: 40px;
      z-index: 1;
      animation: moveCloudInstance 60s linear infinite;
    }

    @keyframes moveCloudInstance {
      0% { transform: translateX(0); }
      100% { transform: translateX(-200vw); }
    }

    #world {
      position: absolute;
      bottom: 0;
      display: flex;
      height: 100px;
      left: 0;
      z-index: 2;
    }

    .groundSegment {
      width: 200px;
      height: 100px;
      background: #4CAF50;
    }

    .tree {
      position: absolute;
      bottom: 100px;
      font-size: 40px;
      z-index: 3;
    }

    #car { /* Bu kısım fotoğraf için güncellendi */
      position: absolute;
      bottom: 100px; /* Zeminden yukarıda */
      left: 50%;
      transform: translateX(-50%);
      z-index: 4;
      /* güney.png fotoğrafı için boyutlandırma */
      width: 60px; /* Yaklaşık araba emojisi boyutu */
      height: auto; /* Oranı koru */
      display: block; /* img elementlerinin varsayılan boşluğunu kaldırır */
    }

    .controls {
      position: absolute;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 40px;
      z-index: 5;
    }

    .btn {
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 12px 18px;
      border-radius: 10px;
      font-size: 18px;
      border: none;
      user-select: none;
      touch-action: none;
    }
  </style>
</head>
<body>

<div id="orientationWarning">Lütfen telefonu yatay çevirin 📱➡️📱</div>

<div id="game">
  <div id="world"></div>
  <img id="car" src="güney.png" alt="Güney" />
  <div class="controls">
    <button id="leftBtn" class="btn">◀️</button>
    <button id="rightBtn" class="btn">▶️</button>
  </div>
</div>

<script>
  const world = document.getElementById("world");
  const leftBtn = document.getElementById("leftBtn");
  const rightBtn = document.getElementById("rightBtn");
  const game = document.getElementById("game");
  const car = document.getElementById("car"); // Araba elementini de alıyoruz

  let offset = 0;
  let velocity = 0;
  let acceleration = 0;
  const friction = 0.95;

  const treeList = [];
  let lastTreePosition = 0;

  const cloudList = [];
  let lastCloudPosition = 0;
  const cloudSpawnMinDistance = 150;
  const cloudSpawnMaxDistance = 400;

  function createGround() {
    const segment = document.createElement("div");
    segment.className = "groundSegment";
    world.appendChild(segment);
  }

  function createTree(globalX) {
    const tree = document.createElement("div");
    tree.className = "tree";
    tree.dataset.globalX = globalX;
    tree.textContent = ["🌳", "🌴", "🌲"][Math.floor(Math.random() * 3)];
    game.appendChild(tree);
    treeList.push(tree);
  }

  function createCloud(globalX) {
    const cloud = document.createElement("div");
    cloud.className = "cloud";
    cloud.dataset.globalX = globalX;
    cloud.textContent = "☁️";

    const randomSize = Math.random() * 30 + 30;
    const randomOpacity = Math.random() * 0.5 + 0.3;
    const randomY = Math.random() * (window.innerHeight / 3);

    cloud.style.fontSize = randomSize + "px";
    cloud.style.opacity = randomOpacity;
    cloud.style.top = randomY + "px";

    game.appendChild(cloud);
    cloudList.push(cloud);
  }

  function updateTrees() {
    for (let tree of treeList) {
      const globalX = parseFloat(tree.dataset.globalX);
      const screenX = globalX - offset;
      tree.style.left = screenX + "px";

      if (screenX < -100) {
        tree.remove();
        treeList.splice(treeList.indexOf(tree), 1);
      }
    }
  }

  function updateClouds() {
    for (let cloud of cloudList) {
      const globalX = parseFloat(cloud.dataset.globalX);
      const screenX = globalX - offset * 0.2;
      cloud.style.left = screenX + "px";

      if (screenX < -200) {
        cloud.remove();
        cloudList.splice(cloudList.indexOf(cloud), 1);
      }
    }
  }

  function update() {
    velocity += acceleration;
    velocity *= friction;
    offset -= velocity;
    world.style.left = -offset + "px";

    // Zemin segmentlerini oluşturma
    const neededSegments = Math.ceil((Math.abs(offset) + window.innerWidth) / 200);
    while (world.children.length < neededSegments) {
      createGround();
    }

    // Ağaçları oluşturma
    const currentGroundEnd = offset + world.children.length * 200;
    while (currentGroundEnd - lastTreePosition >= 300) {
      createTree(lastTreePosition + Math.random() * 200 + 100);
      lastTreePosition = parseFloat(treeList[treeList.length - 1].dataset.globalX);
    }

    // Bulutları oluşturma
    const screenRightEdge = offset + window.innerWidth;
    if (screenRightEdge - lastCloudPosition > cloudSpawnMinDistance) {
      const spawnX = lastCloudPosition + Math.random() * (cloudSpawnMaxDistance - cloudSpawnMinDistance) + cloudSpawnMinDistance;
      createCloud(spawnX);
      lastCloudPosition = spawnX;
    }

    updateTrees();
    updateClouds();

    requestAnimationFrame(update);
  }

  function hold(dir) {
    acceleration = dir;
    clearInterval(window.holdInt);
    window.holdInt = setInterval(() => acceleration = dir, 16);
  }

  function stop() {
    clearInterval(window.holdInt);
    acceleration = 0;
  }

  setup(leftBtn, 0.5);
  setup(rightBtn, -0.5);

  function setup(btn, dir) {
    btn.addEventListener("touchstart", e => { e.preventDefault(); hold(dir); });
    btn.addEventListener("touchend", stop);
    btn.addEventListener("mousedown", () => hold(dir));
    btn.addEventListener("mouseup", stop);
    btn.addEventListener("mouseleave", stop);
  }

  function checkOrientation() {
    const warning = document.getElementById("orientationWarning");
    warning.style.display = window.innerHeight > window.innerWidth ? "flex" : "none";
  }
  window.addEventListener("resize", checkOrientation);
  window.addEventListener("orientationchange", checkOrientation);
  checkOrientation();

  // İlk zemin segmentlerini oluştur
  for(let i=0; i < Math.ceil(window.innerWidth / 200) + 2; i++) {
      createGround();
  }

  // Başlangıçta birkaç ağaç oluştur
  for(let i = 0; i < 5; i++) {
      createTree(i * 300 + Math.random() * 100);
      lastTreePosition = parseFloat(treeList[treeList.length - 1].dataset.globalX);
  }

  // Başlangıçta birkaç bulut oluştur
  for(let i = 0; i < 5; i++) {
      createCloud(i * 400 + Math.random() * 200);
      lastCloudPosition = parseFloat(cloudList[cloudList.length - 1].dataset.globalX);
  }

  update();
</script>

</body>
</html>
